(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(38)},27:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(20),c=a.n(o),s=a(10),i=a(5),l=a(6),u=a(8),p=a(7),h=a(9),m=a(0),d=(a(27),a(17)),b="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:f},k=function(){return fetch("".concat(b,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books})},E=function(e,t){return fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},g=function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},y=a(3),j=a.n(y),O=a(11),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=e.target.value,n=a.props;a.props.moveBook(t,n)},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url('".concat(this.props.imageLinks?this.props.imageLinks.thumbnail:"","')")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{value:this.props.shelf,onChange:this.handleChange},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},"'",this.props.title,"'"),r.a.createElement("div",{className:"book-authors"},this.props.authors?this.props.authors:"")))}}]),t}(n.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},this.props.shelfName),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},this.props.books&&this.props.books.map(function(t){return r.a.createElement(w,Object.assign({key:t.id},t,{moveBook:e.props.moveBook}))}))))}}]),t}(n.Component);var R=function(e){return r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,e.appName))};var B=function(e){return r.a.createElement("div",{className:"open-search"},r.a.createElement(s.b,{to:"/search"},r.a.createElement("button",null,"Add a book")))},x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).moveBook=function(){var e=Object(O.a)(j.a.mark(function e(t,n){var r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(n,t);case 3:return e.sent,e.next=6,k();case 6:r=e.sent,a.props.addBooks(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:t=e.sent,this.props.addBooks(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{appName:"MyReads App"}),r.a.createElement(N,{shelfName:"Currently Reading",books:this.props.currentlyReading,moveBook:this.moveBook}),r.a.createElement(N,{shelfName:"Want to Read",books:this.props.wantToRead,moveBook:this.moveBook}),r.a.createElement(N,{shelfName:"Read",books:this.props.read,moveBook:this.moveBook}),r.a.createElement(B,null))}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={term:"",books:[]},a.onInputChange=function(){var e=Object(O.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setState({term:t}),e.next=4,g(a.state.term);case 4:(n=e.sent).error?a.setState({books:[]}):a.setState({books:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),a.onFormSubmit=function(e){e.preventDefault()},a.moveBook=function(){var e=Object(O.a)(j.a.mark(function e(t,a){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(a,t);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:t=e.sent,this.props.addBooks(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.term,a=(this.props.books,""===t?[]:this.state.books);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"close-search"},"Close")),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("input",{value:this.state.term,type:"text",placeholder:"Search by title or author",onChange:function(t){return e.onInputChange(t.target.value)}}))))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},a.map(function(t){var a=e.props.books.find(function(e){return e.id===t.id});return t.shelf=a?a.shelf:"none",r.a.createElement(w,Object.assign({key:t.id},t,{moveBook:e.moveBook}))}))))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],currentlyReading:[],wantToRead:[],read:[]},a.addBooks=function(e){var t=e.filter(function(e){return"currentlyReading"===e.shelf}),n=e.filter(function(e){return"wantToRead"===e.shelf}),r=e.filter(function(e){return"read"===e.shelf});a.setState({books:e,currentlyReading:t,wantToRead:n,read:r})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.books,a=e.currentlyReading,n=e.wantToRead,o=e.read;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(x,{books:t,currentlyReading:a,wantToRead:n,read:o,addBooks:this.addBooks})),r.a.createElement(m.a,{exact:!0,path:"/search"},r.a.createElement(C,{books:t,currentlyReading:a,wantToRead:n,read:o,addBooks:this.addBooks})))}}]),t}(r.a.Component);a(36);c.a.render(r.a.createElement(s.a,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.e44a74bd.chunk.js.map